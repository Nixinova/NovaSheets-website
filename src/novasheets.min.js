function parseNovaSheets(r,a){const n="undefined"==typeof window;String.prototype.strim=function(){return this.replace(/^\s*(.+?)\s*$/,"$1").replace(/\s+/g," ")};const s=String.raw,l=(e,t=8)=>{let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t);return Math.abs(r).toString(16).substring(0,t).padStart(t,"0")},c=e=>e.replace(/[.*+?^/${}()|[\]\\]/g,"\\$&"),i=(...e)=>console.log("<NovaSheets|debug> ",...e);let o=[],u=[],d,p;if(r&&r.input)e(r.input,r.output);else if(r)o=[r.toString()],u="raw";else{d=document.querySelectorAll('link[rel="novasheet" i], link[rel="novasheets" i]'),p=document.querySelectorAll('[type="novasheet" i], [type="novasheets" i]');let e={full:[],rel:[]};for(let t of d)e.full.push(t.href),e.rel.push(t.getAttribute("href"));for(let t in e.full)try{let r=new XMLHttpRequest;if(r.open("GET",e.full[t],!1),r.send(),404==r.status)throw 404;let a=r.responseText;o.push(a.toString()),u.push(e.rel[t])}catch{console.warn(`<NovaSheets> File '${e.rel[t]}' cannot be accessed.`)}for(let e of p){let t=e.value||e.innerHTML||e.innerText;o.push(t.replace(/^\s*`|`\s*$/,"")),u.push("inline")}}for(let e in o){o[e]=o[e].replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/(?<![a-z]+:)\n?\/\/.*$/gm,"").replace(/(?:@var.+?=.*$|@var\s*[^=]*(?=\n\s*@var\s.))(?!\n\s*@endvar)/gm,"$& @endvar").replace(/@(var|const|endvar)/g,"\n$&").replace(/@option\s*[A-Z_]+\s*(true|false|[0-9]+)|@endvar/g,"$&\n");let i=o[e].split("\n"),d="",p=[],$=[];for(let e in i)i[e]=i[e].replace(/[\r\n]/g," "),d+="\n"+i[e];d=d.replace(/\s*(?:@var.*?((?=@var)|@endvar)|@option\s*[A-Z_]+\s*(true|false|[0-9]+))/gms," ").replace(/\/\*(.+?)\*\//gs,(e,t)=>e.startsWith("/*[")&&e.endsWith("]*/")?e.replace(/^\/\*\[(.+)\]\*\/$/,"/*$1*/"):e.startsWith("/*/")||e.endsWith("/*/")?e:(p.indexOf(t)<0&&p.push(t),"/*COMMENT#"+p.indexOf(t)+"*/")).replace(/\/\*\/(.+?)\/\*\//gs,(e,t)=>($.indexOf(t)<0&&$.push(t),"/*STATIC#"+$.indexOf(t)+"*/"));let g=[],h=[],m={BUILTIN_FUNCTIONS:!0,DECIMAL_PLACES:!1,KEEP_NAN:!1,KEEP_UNPARSED:!1,MAX_ARGUMENTS:10,MAX_MATH_RECURSION:5,MAX_RECURSION:50};for(let e in i){let t;if(i[e].match(/^\s*@var\s/)){let t=i[e].replace(/^\s*@var\s/,"").split("="),r=i.slice(e),a;for(let e in r)if(r[e].match(/^\s*@endvar\s*$|^\s*@var\s/)&&0!=e){a=e;break}let n=t[0].trim().split("|")[0].trim();const l=t.slice(1).join("=")||"",c=r.slice(1,a).join("\n"),o=new RegExp(s`\$\(\s*${n}\s*\)`,"g");let u=(l+c).trim().replace(o,g[n]||"");g[n]=u}else if(i[e].match(t=/^\s*@option\s+/)){let[r,a]=i[e].replace(t,"").split(/\s+/);switch(r.toUpperCase()){case"BUILTIN_FUNCTIONS":m.BUILTIN_FUNCTIONS="0"!==a&&"false"!==a;break;case"DECIMAL_PLACES":m.DECIMAL_PLACES="false"!==a&&a;break;case"KEEP_NAN":m.KEEP_NAN="0"!==a&&"false"!==a;break;case"KEEP_UNPARSED":m.KEEP_UNPARSED="0"!==a&&"false"!==a;break;case"MAX_ARGUMENTS":m.MAX_ARGUMENTS=parseInt(a);break;case"MAX_MATH_RECURSION":m.MAX_MATH_RECURSION=parseInt(a);break;case"MAX_RECURSION":m.MAX_RECURSION=parseInt(a)}}}d.replace(/([^{}]+)({.+?})/gms,(e,t,r)=>{t.includes("$(")||t.startsWith("@")||(h[c(t.trim().replace(/>/g,":GT:"))]=r)});const f=s`(?:[0-9]*\.?[0-9]+)`,E=s`(?:0x[0-9a-f]*\.?[0-9a-f]+|0b[01]*\.?[01]+|0o[0-7]*\.?[0-7]+|${f})`,b=s`(?:\(\s*${E}\s*\)|${E})\s*[a-z]*[-+*^/Ee\s]+(?:\(\s*${E}\s*\)|${E})\s*[a-z]*`,N=s`\s*(?:em|rem|en|ex|px|pt|pc|cm|mm|m(?![ms])|ft|in|s|ms)`,M=e=>s`(?:[-^*/+\s${e?"()":""}]+(?=\d|\.))`,x=e=>{const t=s`\(\s*`,r=s`\s*\)`,a=`${E}(?:${N})?`,n=`(?:${t}${a}${r}|${a})`,l=e.op||M(e.b);let c=s`(?:(?:${n}\s*${l}\s*)+(?:${a}))`;return s`\(${c}\)|${c}`},A=e=>m.KEEP_NAN?Number(e):isNaN(Number(e))?"":Number(e),F=()=>{d=d.replace(/(?<!#)\b(\d+)[Ee](\d+)/g,(e,t,r)=>t*10**r);for(let e=0;e<m.MAX_MATH_RECURSION&&d.match(RegExp(b));e++)d=d.replace(RegExp(x({}),"g"),e=>{let t=!e.match(/[-+e^*/]/),r=e.match(RegExp(s`${N}\s-?${E}`));if(t||r)return e;let a=e.match(RegExp(N,"g"))||[],n=a[a.length-1]||"",l=e.replace(RegExp(`(${f})s*(${N})`,"g"),(e,t,r)=>{switch(r){case"mm":case"ms":return n=r[1],A(t)/1e3;case"cm":return n="m",A(t)/100;case"in":return n="m",.0254*A(t);case"ft":return n="m",.3048*A(t);default:return e}}).replace(RegExp(N,"g"),"").replace(/\d\s*[Ee]\s*\d/g,"$&".replace(/\s/g,"")).replace(/--/g,"- -").replace(/\^/g,"**");try{return eval(l)+n}catch{return l+n}})},R=(e,t,{nonest:r,notrim:a,allargs:n}={})=>{F();const l=d.match(RegExp(s`\$\(\s*(?:${e})\b`));if(!l)return;const c=d.substr(d.indexOf(l[0]));let i,o="",u=0;for(let e=0;e<c.length&&(o+=c[e],u>0&&(i=!0),"("===c[e]&&u++,")"===c[e]&&u--,!i||0!==u);e++)if(e==c.length-1&&u>0)return;if(!o.trim()||r&&o.match(/.+\$\(/))return;const p=s`^\$\(${a?"|":s`\s*|\s*`}\)$`,$=a?"|":/\s*\|\s*/;let g=o.replace(RegExp(p,"g"),"").split($);for(let e=0;e<m.MAX_ARGUMENTS;e++)null==g[e]&&(g[e]="");if(!n)for(let e=m.MAX_ARGUMENTS;e>0;e--)if(g[e]){g=g.slice(0,e+1);break}g[0]=o,d=d.replace(o,t(...g))},S=e=>e.includes("$(")||e.match(RegExp(b))||e.match(/&%</);let _=0,I;for(;(S(d)||_<1)&&_++<m.MAX_RECURSION&&I!==d;){I=d;for(let e in h)d=d.replace(new RegExp(s`\$<\s*${e.replace(/:GT:/g,">")}\s*>`),h[e]||"{}");d=d.replace(/\$<.+?>/g,"{}");for(let e in g)R(e,(t,...r)=>{let a=g[e];for(let e in r){if(!r[e])continue;let t=r[e].split("="),n=t[1]?t[0].strim():+e+1,l=t[1]?t[1].strim():t[0].strim();a=a.replace(RegExp(s`\$\[${n}[^\]]*\]`,"g"),l)}return a=a.replace(/\$\[.*?(?:\|([^\]]*))?\]/g,"$1"),a});for(let e=0;d.indexOf("%")>-1&&e++<m.MAX_RECURSION;e++)d=d.replace(/([^{}|()]+?){[^{}]*?}[^{}]*?%[^{}]*?{/g,(e,t)=>t.includes("%")?e:e.replace(/(?<!\d)%/g,t.strim()));for(let e=0;d.indexOf("&")>-1&&e++<m.MAX_RECURSION;e++)d=d.replace(/([^{}|()]+?){[^{}]*?}([^{}]*?&[^{}]*?{[^{}]*})+/g,(e,t)=>t.includes("&")?e:e.replace(/&/g,t.strim()+(t.match(/(?<!\d)%/)?"<":"")));for(let e=0;d.indexOf("<")>-1&&e++<m.MAX_RECURSION;e++)d=d.replace(/[>+~\s]\s*[^&%{}>+~\s<]+\s*</g,"");d=d.replace(/{([^{}]*?)}\s*<([^\[\]]*?)>/gm,(e,t,r)=>{const a=t.split(/\s*;\s*/);for(let e in a){const[t,n]=a[e].split(/\s*:\s*/);if(t.trim()===r.trim())return n||""}return""}),d=d.replace(/{([^{}]*?)}\s*!/gm,(e,t)=>t),d=d.replace(/([^{}]*?)\s*@\s*(?:(\d+px)(?:\s*\.{2,})?(\s*\d+px)?|(\d+px)?(?:\s*\.{2,})?(\s*\d+px))([^{}]*?){(.*?)}/gm,(e,t,r,a,n,l,c,i)=>{let[o,u]=[r||n,a||l],d=s`@\s*(\d+px)?\s*(?:\.{2,})?\s*(\d+px)?`,p=c.match(RegExp(d,"g"));p&&([,o,u]=p[p.length-1].match(RegExp(d)));let $="only screen";return o&&($+=` and (min-width: ${o})`),u&&($+=` and (max-width: ${u}-1px)`),`@media ${$} { ${(t+c).replace(RegExp(d,"g"),"")} { ${i} } }`});let e=[];if(m.BUILTIN_FUNCTIONS){const r=n?require("./functions"):t,a=r({constants:m});e.push(...a)}const r=a&&a.getFunctions&&a.getFunctions()||[];e.push(...r);for(let t of e)R(t.name,t.body)}if(!m.KEEP_UNPARSED){d=d.replace(/@endvar/g,"");let e=d.match(/\$[\[(](.+?)[\])]/g);if(e)for(let t of e){let e=t.replace(/\$[\[(](.*?)(\|.*)?[\])]/,"$1").strim();d=d.replace(t,"");let r=t.includes("$(")?"variable":"argument";console.log(`<NovaSheets> Instances of unparsed ${r} "${e}" have been removed from the output.`)}}d=d.replace(/(\s*;)+/g,";").replace(/(?<!^ *) +/gm," ").replace(/(?<![1-9]+)(0\.\d+)(?=m|s)/,(e,t)=>1e3*Number(t)+"m").replace(/(?<=\d)0mm/g,"cm").replace(/(?<=\d)(000mm|00cm)/g,"m").replace(/\.?0{10,}\d/g,"").replace(/((\d)\2{9,})\d/g,"$1").replace(/(\d+)([5-9])\2{10,}\d?(?=\D)/g,(e,t)=>Number(t)+1).replace(RegExp(s`((\d)\.\d{0,${m.DECIMAL_PLACES||""}})(\d?)\d*`),(e,t,r,a)=>"0"===m.DECIMAL_PLACES?a.match(/[5-9]$/)?parseInt(r)+1:r:a.match(/[5-9]$/)?t.replace(/.$/,"")+(parseInt(t.substr(-1))+1).toString():t).replace(/}\s*}/,"}\n}");for(let e in $)d=d.replace(RegExp(s`\/\*STATIC#${e}\*\/`,"g"),$[e].strim());for(let e in p)d=d.replace(RegExp(s`\/\*COMMENT#${e}\*\/`,"g"),"/*"+p[e]+"*/");if(r)return d.strim();{if(document.querySelectorAll(`[data-hash="${l(d)}"]`).length)break;let t=document.createElement("style");t.innerHTML="\n"+d.trimStart().trimEnd()+"\n",t.dataset.hash=l(d),t.dataset.source=u[e],(document.head||document.body).appendChild(t)}}delete String.prototype.strim}function e(e,t,r){const a=require("fs"),n=require("glob");try{const s=e=>{for(let n of e)a.readFile(n,"utf8",(e,s)=>{if(e)throw`FS_ReadError: Input file '${n}' not found.`;let c=t;const i=c.includes("/")&&c.replace(/\/[^\/]+$/,"");i&&a.mkdir(i,{recursive:!0},e=>{if(e)throw`FS_MkDirError: Could not create directory '${i}'.`});const o=n.replace(/.+\/([^\/]+)$/,"$1");c||(c=l?n.replace(/\/[^\/]+$/,"/"):n.replace(/\.\w+$/,".css")),c.endsWith("/")?c+=o:l?c+="/"+o:c.match(/\.\w+$/)||(c+=".css"),c=c.replace(/\.\w+$/,".css"),a.writeFile(c,parseNovaSheets(s,r),e=>{if(e)throw`FS_WriteError: Output file '${c}' is invalid.`;console.log(`<NovaSheets> Wrote file '${n}' to '${c}'`)})})},l=n.hasMagic(e);l?n(e,{},(e,t)=>{if(e)throw e;s(t)}):s([e])}catch{}}function t({constants:e}){const t=new r,a=String.raw;t.addFunction("@each",(e,t="",r="",a="",...n)=>{n=n.join("|");let[s,l,c,i]=n?[t,r,a,n]:a?[t,r,r,a]:[t,",",",",r];[s,l,c,i]=[s.strim(),l.strim(),c,i.strim()];let o=s.split(l),u=[];for(let e in o){let t=i.replace(/\$i/gi,Number(e)+1).replace(/\$v\[([0-9]+)([-+*/][0-9]+)?\]/g,(e,t,r)=>o[eval(Number(t-1)+(r||0))]).replace(/.?\s*undefined/g,"").replace(/\$v/gi,o[e]);u.push(t)}return u.join(c)},{notrim:!0}),t.addFunction("@repeat",(e,t,...r)=>{let a,n,s=t;r[1]?[a,n]=[r[0],r.slice(1).join("|")]:[a,n]=["",r.join("|")];let l="";for(let e=0;e<Number(s);e++)l+=(e>0?a:"")+n.replace(/\$i/gi,Number(e)+1);return l});const n=a`(?:[0-9]*\.?[0-9]+)`,s=a`(?:0x[0-9a-f]*\.?[0-9a-f]+|0b[01]*\.?[01]+|0o[0-7]*\.?[0-7]+|${n})`,l=t=>e.KEEP_NAN?Number(t):isNaN(Number(t))?"":Number(t),c=(t,r)=>{let a=!t||t===1/0||Number.isNaN(t);return a&&e.KEEP_NAN?"NaN":a&&!e.KEEP_NAN?r||0:t};t.addFunction("@e",e=>Math.E),t.addFunction("@pi",e=>Math.PI),t.addFunction("@mod",(e,t,r)=>c(t%r,e)),t.addFunction("@sin",(e,t)=>c(Math.sin(t),e)),t.addFunction("@asin",(e,t)=>c(Math.asin(t),e)),t.addFunction("@cos",(e,t)=>c(Math.cos(t),e)),t.addFunction("@acos",(e,t)=>c(Math.acos(t),e)),t.addFunction("@tan",(e,t)=>c(Math.tan(t),e)),t.addFunction("@atan",(e,t)=>c(Math.atan(t),e)),t.addFunction("@abs",(e,t)=>c(Math.abs(t),e)),t.addFunction("@floor",(e,t)=>c(Math.floor(t),e)),t.addFunction("@ceil",(e,t)=>c(Math.ceil(t),e)),t.addFunction("@percent",(e,t)=>c(100*l(t)+"%",e)),t.addFunction("@log",(e,t,r)=>c(Math.log(r)/(t?Math.log(t):1),e)),t.addFunction("@root",(e,t,r)=>c(Math.pow(r||t,1/(r?t:2)),e)),t.addFunction("@round",(e,t,r)=>{let a=l(t)+Number.EPSILON,n=Math.pow(10,r||0);return c(Math.round(a*n)/n,e)}),t.addFunction("@min|@max",(e,...t)=>{let r=[];for(let e of t)e&&r.push(e);let a=Math[e.includes("@min")?"min":"max"](...r);return c(a,e)}),t.addFunction("@clamp",(e,t,r,a)=>{let n=Number(t),s=Number(r),l=Number(a);return l<s&&([s,l]=[l,s]),c(n<=s?s:n>=l?l:n,e)}),t.addFunction("@degrees",(e,t)=>{let[r,a]=[t.replace(/[a-z]+/,""),t.replace(RegExp(n),"")];if("grad"===a)return.9*r;let s=r/Math.PI*180;return c(s,e)}),t.addFunction("@radians",(e,t)=>{let[r,a]=[t.replace(/[a-z]+/,""),t.replace(RegExp(n),"")];if("grad"===a)return r*Math.PI/200;let s=r*Math.PI/180;return c(s,e)}),t.addFunction("@gradians",(e,t)=>{let[r,a]=[t.replace(/[a-z]+/,""),t.replace(RegExp(n),"")];return"rad"===a?r/Math.PI*200:c(r/.9,e)}),t.addFunction("@lowercase",(e,t)=>t.toLowerCase()),t.addFunction("@uppercase",(e,t)=>t.toUpperCase()),t.addFunction("@titlecase",(e,t)=>t.replace(/\b\w/g,e=>e.toUpperCase())),t.addFunction("@capitali[sz]e",(e,t)=>t[0].toUpperCase()+t.substr(1)),t.addFunction("@uncapitali[sz]e",(e,t)=>t[0].toLowerCase()+t.substr(1)),t.addFunction("@extract",(e,t,r,a)=>t.split(a?r:",")[l(a||r)-1]||""),t.addFunction("@encode",(e,t)=>encodeURIComponent(t)),t.addFunction("@length",(e,t)=>t.strim().length),t.addFunction("@replace",(e,...t)=>{t.length<3&&(t=[t[0],t[1]||"",t[2]||""]);let r=(t=t.slice(0,t.indexOf("")<=3?3:t.indexOf("")))[0].strim(),a=t.slice(1,-1).join("|").strim(),n=t.slice(-1)[0].strim(),s=a.startsWith("/");if(s){let e=a.strim().match(/\/(.+?)\/([gimusy]*)/).slice(1);a=RegExp(e[0],e[1]||"s")}return r.replace(s?a:RegExp(escapeRegex(a),"g"),n)},{notrim:!0,allargs:!0});const i=e=>Math.floor(Number(e)/255*100),o=e=>Math.ceil(255*Number(e.replace("%",""))/100),u=e=>Number(e).toString(16).padStart(2,"0"),d=(e,t)=>{let r=parseInt(e.replace(/#?(.{0,8})$/,"$1"),16),a=r>>16&255,n=r>>8&255,s=255&r,l=t&&i(parseInt(t,16));return null!=l?`rgba(${a}, ${n}, ${s}, ${l})`:`rgb(${a}, ${n}, ${s})`},p=e=>{let t=e.replace("#","");switch(t.length){case 0:return d("000000","00");case 1:return d(t.repeat(6));case 2:return d(t[0].repeat(6),t[1].repeat(2));case 3:return d(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);case 4:return d(t[0]+t[0]+t[1]+t[1]+t[2]+t[2],t[3]+t[3]);default:return d(t.substr(0,6).padEnd(6,"0"),t.substr(6,2)||null)}},$=e=>e.replace(/^\s*\w{3}a?\s*\(\s*|\s*\)$/g,"").split(/,\s*/),g=e=>{let t=$(e.startsWith("#")?p(e):e);for(let r in t)if(t[r])if(t[r].includes("%")){let a=t[r].replace("%","");e.includes("hsl")?t[r]=""+Math.round(a/100*(0===r?360:100)):t[r]=""+o(a)}else 3===r&&(t[r]=Math.round(e.includes("rgb")?num/255:num/100));else t[r]=0;return t},h=e=>{let[t,r,a,n]=Array.isArray(e)?e:g(e);return"#"+u(t)+u(r)+u(a)+(n>0?u(n):"")},m=(e,t,r)=>{if(!t)return e||"";let a=e.match(/^[a-z]{3}a?|^#/).toString(),n=Math.abs(r.toString().includes("%")?r.replace("%","")/100:r);n=n>1?1:n;const s=(e,t)=>Math.floor(l(e)*(1-n)+l(t)*n);let[[c,i,o,u],[d,p,$,m]]=[g(e),g(t)],[f,E,b,N]=[s(c,d),s(i,p),s(o,$),s(u,m)];switch(a){case"rgba":return`rgba(${f}, ${E}, ${b}, ${N})`;case"rgb":return`rgb(${f}, ${E}, ${b})`;case"hsla":return`hsla(${f%360}, ${E/100}%, ${b/100}%, ${N})`;case"hsl":return`hsla(${f%360}, ${E/100}%, ${b/100}%)`;case"#":return h([f,E,b,N])}},f=(e,t,r,a)=>{if(!t.includes("hsl"))return m(t,r,a||.5);let[n,s,c,i]=g(t),o=a.replace("%",""),u=l(s)-l(o),d=l(c)+l(o)*("darken"===e?-1:1),p="desat"===e?`${u}%, ${c}%`:`${s}%, ${d<0?0:d}%`;return`${t.match(/^hsla?/)}(${n%360}, ${p}${i?", "+i:""})`};t.addFunction("@colou?r",(e,t,r="0",a="0",n="0",s="")=>{switch(/#|rgba?|hsla?/i.test(r)?(r.includes("#")&&(r=p(r)),/rgba?|hsla?/.test(r)&&([r,a,n,s]=g(r))):[r,a,n,s]=g(`${t}(${r}, ${a}, ${n}, ${s})`),t=t.toLowerCase()){case"#":case"hash":case"hex":case"hexadecimal":return"#"+u(r)+u(a)+u(n)+(s?u(o(s)):"");case"rgb":return`rgb(${r}, ${a}, ${n})`;case"rgba":return`rgba(${r}, ${a}, ${n}, ${s||0===s?100:""}%)`;case"hsl":return`hsl(${r%360}, ${a}%, ${n}%)`;case"hsla":return`hsla(${r%360}, ${a}%, ${n}%, ${s||0===s?100:""}%)`;default:return`${t}(${r} ${a} ${n}${s?" / "+s:""})`}}),t.addFunction("@colou?rpart",(e,t="",r="")=>{let[a,n]=[t.toLowerCase(),r.toLowerCase()],s=g(n);return{r:s[0],h:s[0],g:s[1],s:s[1],b:s[2],l:s[2],a:s[3]}[a[0]]||n}),t.addFunction("@spin",(e,t,r)=>{let a=t.replace(/^hsla?\s*\((\d+),\s*.+\s*\)\s*$/g,"$1"),n=(l(a)+l(r||0))%360;return t.replace(a,n)}),t.addFunction("@blend",(e,t,r,a=.5)=>m(t,r,a)),t.addFunction("@tint|@lighten",(e,t,r=.5)=>f("lighten",t,"#fff",r)),t.addFunction("@shade|@darken",(e,t,r=.5)=>f("darken",t,"#000",r)),t.addFunction("@tone|@desaturate",(e,t,r=.5)=>f("desat",t,"#808080",r));const E=(e,t)=>{if(!e.startsWith("rgb")&&!e.startsWith("#"))return e;let[r,a,n]=t?[...t]:g(e);const s=e=>e<=.03928?e/12.92:(e=>((e+.055)/1.055)**2.4)(e);return.2126*s(r/255)+.7152*s(a/255)+.0722*s(n/255)};t.addFunction("@luma",(e,t)=>E(t)),t.addFunction("@contrast",(e,t,r="",a="")=>E(t)<.5?r:a),t.addFunction("@gr[ae]yscale",(e,t)=>{if(t.startsWith("hsl"))return t.replace(/^(hsla?)\s*\(\s*(\d+),\s*(\d+)/,"$1($2, 0");let r=Math.round(255*E(t)),a=`rgb(${Array(3).fill(r).join(", ")})`;return t.startsWith("#")?h(a):a});const b=a`(?:\(\s*${s}\s*\)|${s})`,N=t=>{for(let r=0;r<e.MAX_ARGUMENTS/10;r++)t=t.strim().replace(/(?:'(.+?)'|"(.+?)")+/,"$1$2").replace(/\bor\b/gi,"||").replace(/\band\b/gi,"&&").replace(/\bnot\b/gi,"!").replace(/(.+?)\bnor\b(.+)?/gi,"!($1) && !($2)").replace(/(.+?)\bnand\b(.+)?/gi,"!($1) || !($2)").replace(/(.+?)\bxor\b(.+)?/gi,"($1 && !($2)) || (!($1) && $2)").replace(/(.+?)\bxnor\b(.+)?/gi,"$1 == $2").replace(/(?!=)(!?)=(==)?(?!=)/g,"$1$2==");return t.match(/(<|<=|>|>=|==|!=|&|\||!)/)&&(t=eval(t)),["false","undefined","null","NaN",""].includes(t)&&(t=!1),t},M=e=>RegExp(a`([+-]?${b})\s*(?:${e})\s*([+-]?${b})`);return t.addFunction("@bitwise",(t,r)=>{let n=r.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<");for(let t=0;t<e.MAX_ARGUMENTS/10;t++)n=n.replace(RegExp(a`(?:~|!|not)\s*([+-]?${b})`),(e,t)=>eval("~"+l(t))).replace(M("or|\\|"),(e,t,r)=>eval(`(${l(t)}) | (${l(r)})`)).replace(M("nor"),(e,t,r)=>eval(`~ (${l(t)}) | (${l(r)})`)).replace(M("and|&"),(e,t,r)=>eval(`(${l(t)}) & (${l(r)})`)).replace(M("nand"),(e,t,r)=>eval(`~ (${l(t)}) & (${l(r)})`)).replace(M("xor"),(e,t,r)=>eval(`(${l(t)}) ^ (${l(r)})`)).replace(M("xnor"),(e,t,r)=>eval(`~ (${l(t)}) ^ (${l(r)})`));return n}),t.addFunction("@boolean",(e,t)=>N(t)),t.addFunction("@if",(e,t,r="",a="")=>N(t)?r:a),t.addFunction("@breakpoint",(e,t=0,r="",a="",n="")=>{if(!t)return e;const s=(e,t,r)=>`@media (${e}-width: ${t.trim()}${"max"===e?"-1px":""}) { ${r}}`;let l=(r+a).includes("{"),c=l?[r,a]:[`${r} {${a}} `,`${r} {${n}} `],i=(l?r:a).trim()?s("max",t,c[0]):"",o=(l?a:n).trim()?s("min",t,c[1]):"";return i+(i&&o?"\n":"")+o},{notrim:!0}),t.addFunction("@prefix",(e,t,r)=>`-webkit-${t}: ${r}; -moz-${t}: ${r}; -ms-${t}: ${r}; -o-${t}: ${r}; ${t}: ${r};`,{nonest:!0}),t.getFunctions()}class r{constructor(){this.functions=[]}static parse(...e){return parseNovaSheets(...e)}static compile(...t){return e(...t)}addFunction(e,t){return this.functions.push({name:e,body:t}),this}getFunctions(){return this.functions}}try{module.exports=r}catch{document.addEventListener("DOMContentLoaded",()=>r.parse())}