const e="0.6.7";var r,t;try{r=require("fs"),t=require("glob")}catch{}function parseNovaSheets(e){String.prototype.strim=function(){return this.replace(/^\s*(.+?)\s*$/,"$1").replace(/\s+/g," ")};const r=String.raw,t=(e,r=8)=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r);return Math.abs(t).toString(16).substring(0,r).padStart(r,"0")},s=e=>e.replace(/[.*+?^/${}()|[\]\\]/g,"\\$&"),l=(...e)=>console.log("<NovaSheets|debug> ",...e);let n=[],c=[],i,o;if(e&&e.input)a(e.input,e.output);else if(e)n=[e.toString()],c="raw";else{i=document.querySelectorAll('link[rel="novasheet" i], link[rel="novasheets" i]'),o=document.querySelectorAll('[type="novasheet" i], [type="novasheets" i]');let e={full:[],rel:[]};for(let r of i)e.full.push(r.href),e.rel.push(r.getAttribute("href"));for(let r in e.full)try{let t=new XMLHttpRequest;if(t.open("GET",e.full[r],!1),t.send(),404==t.status)throw 404;let a=t.responseText;n.push(a.toString()),c.push(e.rel[r])}catch{console.warn(`<NovaSheets> File '${e.rel[r]}' cannot be accessed.`)}for(let e of o){let r=e.value||e.innerHTML||e.innerText;n.push(r.replace(/^\s*`|`\s*$/,"")),c.push("inline")}}for(let a in n){n[a]=n[a].replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/(?<![a-z]+:)\n?\/\/.*$/gm,"").replace(/(?:@var.+?=.*$|@var\s*[^=]*(?=\n\s*@var\s.))(?!\n\s*@endvar)/gm,"$& @endvar").replace(/@(var|const|endvar)/g,"\n$&").replace(/@const\s*[A-Z_]+\s*(true|false|[0-9]+)|@endvar/g,"$&\n");let l=n[a].split("\n"),i="",o=[],p=[];for(let e in l)l[e]=l[e].replace(/[\r\n]/g," "),i+="\n"+l[e];i=i.replace(/\s*(?:@var.*?((?=@var)|@endvar)|@const\s*[A-Z_]+\s*(true|false|[0-9]+))/gms," ").replace(/\/\*(.+?)\*\//gs,(e,r)=>e.startsWith("/*[")&&e.endsWith("]*/")?e.replace(/^\/\*\[(.+)\]\*\/$/,"/*$1*/"):e.startsWith("/*/")||e.endsWith("/*/")?e:(o.indexOf(r)<0&&o.push(r),"/*COMMENT#"+o.indexOf(r)+"*/")).replace(/\/\*\/(.+?)\/\*\//gs,(e,r)=>(p.indexOf(r)<0&&p.push(r),"/*STATIC#"+p.indexOf(r)+"*/"));let $=[],u=[],h=50,g=5,m=10,d,f=!1,b=!1;for(let e in l){let t;if(l[e].match(/^\s*@var\s/)){let t=l[e].replace(/^\s*@var\s/,"").split("="),a=l.slice(e),s;for(let e in a)if(a[e].match(/^\s*@endvar\s*$|^\s*@var\s/)&&0!=e){s=e;break}let n=t[0].trim().split("|")[0].trim();const c=t.slice(1).join("=")||"",i=a.slice(1,s).join("\n"),o=new RegExp(r`\$\(\s*${n}\s*\)`,"g");let p=(c+i).trim().replace(o,$[n]||"");$[n]=p}else if(l[e].match(t=/^\s*@const\s+/)){let[r,a]=l[e].replace(t,"").split(/\s+/);switch(r.toUpperCase()){case"MAX_RECURSION":h=parseInt(a);break;case"MAX_MATH_RECURSION":g=parseInt(a);break;case"MAX_ARGUMENTS":m=parseInt(a);break;case"DECIMAL_PLACES":d="false"!==a&&a;break;case"KEEP_NAN":f="0"!==a&&"false"!==a;break;case"KEEP_UNPARSED":b="0"!==a&&"false"!==a}}}i.replace(/([^{}]+)({.+?})/gms,(e,r,t)=>{r.includes("$(")||r.startsWith("@")||(u[s(r.trim().replace(/>/g,":GT:"))]=t)});const x=r`(?:[0-9]*\.?[0-9]+)`,v=r`(?:0x[0-9a-f]*\.?[0-9a-f]+|0b[01]*\.?[01]+|0o[0-7]*\.?[0-7]+|${x})`,E=r`(?:\(\s*${v}\s*\)|${v})`,M=r`(?:\(\s*${v}\s*\)|${v})\s*[a-z]*[-+*^/Ee\s]+(?:\(\s*${v}\s*\)|${v})\s*[a-z]*`,N=r`\s*(?:em|rem|en|ex|px|pt|pc|cm|mm|m(?![ms])|ft|in|s|ms)`,w=e=>r`(?:[-^*/+\s${e?"()":""}]+(?=\d|\.))`,S=e=>{const t=r`\(\s*`,a=r`\s*\)`,s=`${v}(?:${N})?`,l=`(?:${t}${s}${a}|${s})`,n=e.op||w(e.b);let c=r`(?:(?:${l}\s*${n}\s*)+(?:${s}))`;return r`\(${c}\)|${c}`},R=e=>f?Number(e):isNaN(Number(e))?"":Number(e),y=()=>{i=i.replace(/(?<!#)\b(\d+)[Ee](\d+)/g,(e,r,t)=>r*10**t);for(let e=0;e<g&&i.match(RegExp(M));e++)i=i.replace(RegExp(S({}),"g"),e=>{let t=!e.match(/[-+e^*/]/),a=e.match(RegExp(r`${N}\s-?${v}`));if(t||a)return e;let s=e.match(RegExp(N,"g"))||[],l=s[s.length-1]||"",n=e.replace(RegExp(`(${x})s*(${N})`,"g"),(e,r,t)=>{switch(t){case"mm":case"ms":return l=t[1],R(r)/1e3;case"cm":return l="m",R(r)/100;case"in":return l="m",.0254*R(r);case"ft":return l="m",.3048*R(r);default:return e}}).replace(RegExp(N,"g"),"").replace(/\d\s*[Ee]\s*\d/g,"$&".replace(/\s/g,"")).replace(/--/g,"- -").replace(/\^/g,"**");try{return eval(n)+l}catch{return n+l}})},C=(e,r)=>{let t=!e||e===1/0||Number.isNaN(e);return t&&f?"NaN":t&&!f?r||0:e},A=(e,t,{nonest:a,notrim:s,allargs:l}={})=>{y();const n=i.match(RegExp(r`\$\(\s*(?:${e})\b`));if(!n)return;const c=i.substr(i.indexOf(n[0]));let o,p="",$=0;for(let e=0;e<c.length&&(p+=c[e],$>0&&(o=!0),"("===c[e]&&$++,")"===c[e]&&$--,!o||0!==$);e++)if(e==c.length-1&&$>0)return;if(!p.trim()||a&&p.match(/.+\$\(/))return;const u=r`^\$\(${s?"|":r`\s*|\s*`}\)$`,h=s?"|":/\s*\|\s*/;let g=p.replace(RegExp(u,"g"),"").split(h);for(let e=0;e<m;e++)null==g[e]&&(g[e]="");if(!l)for(let e=m;e>0;e--)if(g[e]){g=g.slice(0,e+1);break}g[0]=p,i=i.replace(p,t(...g))},I=([e,r,t])=>console.warn(`Unknown value "${e}" in built-in function ${r}. ${t}.`);let O=0,k;for(;(i.indexOf("$(")>-1||O<1)&&O++<h&&k!==i;){k=i;for(let e in u)i=i.replace(new RegExp(r`\$<\s*${e.replace(/:GT:/g,">")}\s*>`),u[e]||"{}");i=i.replace(/\$<.+?>/g,"{}");for(let e in $)A(e,(t,...a)=>{let s=$[e];for(let e in a){if(!a[e])continue;let t=a[e].split("="),l=t[1]?t[0].strim():+e+1,n=t[1]?t[1].strim():t[0].strim();s=s.replace(RegExp(r`\$\[${l}[^\]]*\]`,"g"),n)}return s=s.replace(/\$\[.*?(?:\|([^\]]*))?\]/g,"$1"),s});for(let e=0;i.indexOf("%")>-1&&e++<h;e++)i=i.replace(/([^{}|()]+?){[^{}]*?}[^{}]*?%[^{}]*?{/g,(e,r)=>r.includes("%")?e:e.replace(/(?<!\d)%/g,r.strim()));for(let e=0;i.indexOf("&")>-1&&e++<h;e++)i=i.replace(/([^{}|()]+?){[^{}]*?}([^{}]*?&[^{}]*?{[^{}]*})+/g,(e,r)=>r.includes("&")?e:e.replace(/&/g,r.strim()+(r.match(/(?<!\d)%/)?"<":"")));for(let e=0;i.indexOf("<")>-1&&e++<h;e++)i=i.replace(/[>+~\s]\s*[^&%{}>+~\s<]+\s*</g,"");i=i.replace(/{([^{}]*?)}\s*<([^\[\]]*?)>/gm,(e,r,t)=>{const a=r.split(/\s*;\s*/);for(let e in a){const[r,s]=a[e].split(/\s*:\s*/);if(r.trim()===t.trim())return s||""}return""}),i=i.replace(/{([^{}]*?)}\s*!/gm,(e,r)=>r),i=i.replace(/([^{}]*?)\s*@\s*(?:(\d+px)(?:\s*\.{2,})?(\s*\d+px)?|(\d+px)?(?:\s*\.{2,})?(\s*\d+px))([^{}]*?){(.*?)}/gm,(e,t,a,s,l,n,c,i)=>{let[o,p]=[a||l,s||n],$=r`@\s*(\d+px)?\s*(?:\.{2,})?\s*(\d+px)?`,u=c.match(RegExp($,"g"));u&&([,o,p]=u[u.length-1].match(RegExp($)));let h="only screen";return o&&(h+=` and (min-width: ${o})`),p&&(h+=` and (max-width: ${p}-1px)`),`@media ${h} { ${(t+c).replace(RegExp($,"g"),"")} { ${i} } }`}),A("@each",(e,r="",t="",a="",...s)=>{s=s.join("|");let[l,n,c,i]=s?[r,t,a,s]:a?[r,t,t,a]:[r,",",",",t];[l,n,c,i]=[l.strim(),n.strim(),c,i.strim()];let o=l.split(n),p=[];for(let e in o){let r=i.replace(/\$i/gi,Number(e)+1).replace(/\$v\[([0-9]+)([-+*/][0-9]+)?\]/g,(e,r,t)=>o[eval(Number(r-1)+(t||0))]).replace(/.?\s*undefined/g,"").replace(/\$v/gi,o[e]);p.push(r)}return p.join(c)},{notrim:!0}),A("@repeat",(e,r,...t)=>{let a,s,l=r;t[1]?[a,s]=[t[0],t.slice(1).join("|")]:[a,s]=["",t.join("|")];let n="";for(let e=0;e<Number(l);e++)n+=(e>0?a:"")+s.replace(/\$i/gi,Number(e)+1);return n}),A("@e",e=>Math.E),A("@pi",e=>Math.PI),A("@mod",(e,r,t)=>C(r%t,e)),A("@sin",(e,r)=>C(Math.sin(r),e)),A("@asin",(e,r)=>C(Math.asin(r),e)),A("@cos",(e,r)=>C(Math.cos(r),e)),A("@acos",(e,r)=>C(Math.acos(r),e)),A("@tan",(e,r)=>C(Math.tan(r),e)),A("@atan",(e,r)=>C(Math.atan(r),e)),A("@abs",(e,r)=>C(Math.abs(r),e)),A("@floor",(e,r)=>C(Math.floor(r),e)),A("@ceil",(e,r)=>C(Math.ceil(r),e)),A("@percent",(e,r)=>C(100*R(r)+"%",e)),A("@log",(e,r,t)=>C(Math.log(t)/(r?Math.log(r):1),e)),A("@root",(e,r,t)=>C(Math.pow(t||r,1/(t?r:2)),e)),A("@round",(e,r,t)=>{let a=R(r)+Number.EPSILON,s=Math.pow(10,t||0);return C(Math.round(a*s)/s,e)}),A("@min|@max",(e,...r)=>{let t=[];for(let e of r)e&&t.push(e);let a=Math[e.includes("@min")?"min":"max"](...t);return C(a,e)}),A("@clamp",(e,r,t,a)=>{let s=Number(r),l=Number(t),n=Number(a);return n<l&&([l,n]=[n,l]),C(s<=l?l:s>=n?n:s,e)}),A("@degrees",(e,r)=>{let[t,a]=[r.replace(/[a-z]+/,""),r.replace(RegExp(x),"")];if("grad"===a)return.9*t;let s=t/Math.PI*180;return C(s,e)}),A("@radians",(e,r)=>{let[t,a]=[r.replace(/[a-z]+/,""),r.replace(RegExp(x),"")];if("grad"===a)return t*Math.PI/200;let s=t*Math.PI/180;return C(s,e)}),A("@gradians",(e,r)=>{let[t,a]=[r.replace(/[a-z]+/,""),r.replace(RegExp(x),"")];return"rad"===a?t/Math.PI*200:C(t/.9,e)}),A("@lowercase",(e,r)=>r.toLowerCase()),A("@uppercase",(e,r)=>r.toUpperCase()),A("@titlecase",(e,r)=>r.replace(/\b\w/g,e=>e.toUpperCase())),A("@capitali[sz]e",(e,r)=>r[0].toUpperCase()+r.substr(1)),A("@uncapitali[sz]e",(e,r)=>r[0].toLowerCase()+r.substr(1)),A("@extract",(e,r,t,a)=>r.split(a?t:",")[R(a||t)-1]||""),A("@encode",(e,r)=>encodeURIComponent(r)),A("@length",(e,r)=>r.strim().length),A("@replace",(e,...r)=>{r.length<3&&(r=[r[0],r[1]||"",r[2]||""]);let t=(r=r.slice(0,r.indexOf("")<=3?3:r.indexOf("")))[0].strim(),a=r.slice(1,-1).join("|").strim(),l=r.slice(-1)[0].strim(),n=a.startsWith("/");if(n){let e=a.strim().match(/\/(.+?)\/([gimusy]*)/).slice(1);a=RegExp(e[0],e[1]||"s")}return t.replace(n?a:RegExp(s(a),"g"),l)},{notrim:!0,allargs:!0});const e=e=>Math.floor(Number(e)/255*100),t=e=>Math.ceil(255*Number(e.replace("%",""))/100),a=e=>Number(e).toString(16).padStart(2,"0"),l=(r,t)=>{let a=parseInt(r.replace(/#?(.{0,8})$/,"$1"),16),s=a>>16&255,l=a>>8&255,n=255&a,c=t&&e(parseInt(t,16));return null!=c?`rgba(${s}, ${l}, ${n}, ${c})`:`rgb(${s}, ${l}, ${n})`},n=e=>{let r=e.replace("#","");switch(r.length){case 0:return l("000000","00");case 1:return l(r.repeat(6));case 2:return l(r[0].repeat(6),r[1].repeat(2));case 3:return l(r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);case 4:return l(r[0]+r[0]+r[1]+r[1]+r[2]+r[2],r[3]+r[3]);default:return l(r.substr(0,6).padEnd(6,"0"),r.substr(6,2)||null)}},c=e=>e.replace(/^\s*\w{3}a?\s*\(\s*|\s*\)$/g,"").split(/,\s*/),o=e=>{let r=c(e.startsWith("#")?n(e):e);for(let a in r)if(r[a])if(r[a].includes("%")){let s=r[a].replace("%","");e.includes("hsl")?r[a]=""+Math.round(s/100*(0===a?360:100)):r[a]=""+t(s)}else 3===a&&(r[a]=Math.round(e.includes("rgb")?num/255:num/100));else r[a]=0;return r},p=e=>{let[r,t,s,l]=Array.isArray(e)?e:o(e);return"#"+a(r)+a(t)+a(s)+(l>0?a(l):"")},g=(e,r,t)=>{if(!r)return I(["@colorblend",r,"color can not be empty"]),e||"";let a=e.match(/^[a-z]{3}a?|^#/).toString(),s=Math.abs(t.toString().includes("%")?t.replace("%","")/100:t);s=s>1?1:s;const l=(e,r)=>Math.floor(R(e)*(1-s)+R(r)*s);let[[n,c,i,$],[u,h,g,m]]=[o(e),o(r)],[d,f,b,x]=[l(n,u),l(c,h),l(i,g),l($,m)];switch(a){case"rgba":return`rgba(${d}, ${f}, ${b}, ${x})`;case"rgb":return`rgb(${d}, ${f}, ${b})`;case"hsla":return`hsla(${d%360}, ${f/100}%, ${b/100}%, ${x})`;case"hsl":return`hsla(${d%360}, ${f/100}%, ${b/100}%)`;case"#":return p([d,f,b,x])}},d=(e,r,t,a)=>{if(!r.includes("hsl"))return g(r,t,a||.5);let[s,l,n,c]=o(r),i=a.replace("%",""),p=R(l)-R(i),$=R(n)+R(i)*("shade"===e?-1:1),u="tone"===e?`${p}%, ${n}%`:`${l}%, ${$<0?0:$}%`;return`${r.match(/^hsla?/)}(${s%360}, ${u}${c?", "+c:""})`};A("@colou?r",(e,r,s="0",l="0",c="0",i="")=>{switch(/#|rgba?|hsla?/i.test(s)?(s.includes("#")&&(s=n(s)),/rgba?|hsla?/.test(s)&&([s,l,c,i]=o(s))):[s,l,c,i]=o(`${r}(${s}, ${l}, ${c}, ${i})`),r=r.toLowerCase()){case"#":case"hash":case"hex":case"hexadecimal":return"#"+a(s)+a(l)+a(c)+(i?a(t(i)):"");case"rgb":return`rgb(${s}, ${l}, ${c})`;case"rgba":return`rgba(${s}, ${l}, ${c}, ${i||0===i?100:""}%)`;case"hsl":return`hsl(${s%360}, ${l}%, ${c}%)`;case"hsla":return`hsla(${s%360}, ${l}%, ${c}%, ${i||0===i?100:""}%)`;default:return`${r}(${s} ${l} ${c}${i?" / "+i:""})`}}),A("@colou?rpart",(e,r="",t="")=>{let[a,s]=[r.toLowerCase(),t.toLowerCase()],l=o(s);return{r:l[0],h:l[0],g:l[1],s:l[1],b:l[2],l:l[2],a:l[3]}[a[0]]||(I(["@colorpart",a,"on color"+s]),s)}),A("@spin",(e,r,t)=>{let a=r.replace(/^hsla?\s*\((\d+),\s*.+\s*\)\s*$/g,"$1"),s=(R(a)+R(t||0))%360;return r.replace(a,s)}),A("@blend",(e,r,t,a=.5)=>g(r,t,a)),A("@tint|@lighten",(e,r,t=.5)=>d("tint",r,"#fff",t)),A("@shade|@darken",(e,r,t=.5)=>d("shade",r,"#000",t)),A("@tone|@desaturate",(e,r,t=.5)=>d("tone",r,"#808080",t));const f=(e,r)=>{if(!e.startsWith("rgb")&&!e.startsWith("#"))return I(["@luma or @contrast","hsl","only RGB values are allowed"]),e;let[t,a,s]=r?[...r]:o(e);const l=e=>e<=.03928?e/12.92:(e=>((e+.055)/1.055)**2.4)(e);return.2126*l(t/255)+.7152*l(a/255)+.0722*l(s/255)};A("@luma",(e,r)=>f(r)),A("@contrast",(e,r,t="",a="")=>f(r)<.5?t:a),A("@gr[ae]yscale",(e,r)=>{if(r.startsWith("hsl"))return r.replace(/^(hsla?)\s*\(\s*(\d+),\s*(\d+)/,"$1($2, 0");let t=Math.round(255*f(r)),a=`rgb(${Array(3).fill(t).join(", ")})`;return r.startsWith("#")?p(a):a});const b=e=>{for(let r=0;r<m/10;r++)e=e.strim().replace(/(?:'(.+?)'|"(.+?)")+/,"$1$2").replace(/\bor\b/gi,"||").replace(/\band\b/gi,"&&").replace(/\bnot\b/gi,"!").replace(/(.+?)\bnor\b(.+)?/gi,"!($1) && !($2)").replace(/(.+?)\bnand\b(.+)?/gi,"!($1) || !($2)").replace(/(.+?)\bxor\b(.+)?/gi,"($1 && !($2)) || (!($1) && $2)").replace(/(.+?)\bxnor\b(.+)?/gi,"$1 == $2").replace(/(?!=)(!?)=(==)?(?!=)/g,"$1$2==");return e.match(/(<|<=|>|>=|==|!=|&|\||!)/)&&(e=eval(e)),["false","undefined","null","NaN",""].includes(e)&&(e=!1),e},v=e=>RegExp(r`([+-]?${E})\s*(?:${e})\s*([+-]?${E})`);A("@bitwise",(e,t)=>{let a=t.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<");for(let e=0;e<m/10;e++)a=a.replace(RegExp(r`(?:~|!|not)\s*([+-]?${E})`),(e,r)=>eval("~"+R(r))).replace(v("or|\\|"),(e,r,t)=>eval(`(${R(r)}) | (${R(t)})`)).replace(v("nor"),(e,r,t)=>eval(`~ (${R(r)}) | (${R(t)})`)).replace(v("and|&"),(e,r,t)=>eval(`(${R(r)}) & (${R(t)})`)).replace(v("nand"),(e,r,t)=>eval(`~ (${R(r)}) & (${R(t)})`)).replace(v("xor"),(e,r,t)=>eval(`(${R(r)}) ^ (${R(t)})`)).replace(v("xnor"),(e,r,t)=>eval(`~ (${R(r)}) ^ (${R(t)})`));return a}),A("@boolean",(e,r)=>b(r)),A("@if",(e,r,t="",a="")=>b(r)?t:a),A("@breakpoint",(e,r=0,t="",a="",s="")=>{if(!r)return e;const l=(e,r,t)=>`@media (${e}-width: ${r.trim()}${"max"===e?"-1px":""}) { ${t}}`;let n=(t+a).includes("{"),c=n?[t,a]:[`${t} {${a}} `,`${t} {${s}} `],i=(n?t:a).trim()?l("max",r,c[0]):"",o=(n?a:s).trim()?l("min",r,c[1]):"";return i+(i&&o?"\n":"")+o},{notrim:!0}),A("@prefix",(e,r,t)=>`-webkit-${r}: ${t}; -moz-${r}: ${t}; -ms-${r}: ${t}; -o-${r}: ${t}; ${r}: ${t};`,{nonest:!0})}if(!b){let e;if(i=i.replace(/@endvar/g,""),e)for(let r of e){let e=r.replace(/\$[\[(](.*?)(\|.*)?[\])]/,"$1").strim();i=i.replace(r,"");let t=r.includes("$(")?"variable":"argument";console.log(`<NovaSheets> Instances of unparsed ${t} "${e}" have been removed from the output.`)}}i=i.replace(/(\s*;)+/g,";").replace(/(?<!^ *) +/gm," ").replace(/(?<![1-9]+)(0\.\d+)(?=m|s)/,(e,r)=>1e3*Number(r)+"m").replace(/(?<=\d)0mm/g,"cm").replace(/(?<=\d)(000mm|00cm)/g,"m").replace(/\.?0{10,}\d/g,"").replace(/((\d)\2{9,})\d/g,"$1").replace(/(\d+)([5-9])\2{10,}\d?(?=\D)/g,(e,r)=>Number(r)+1).replace(RegExp(r`((\d)\.\d{0,${d||""}})(\d?)\d*`),(e,r,t,a)=>"0"===d?a.match(/[5-9]$/)?parseInt(t)+1:t:a.match(/[5-9]$/)?r.replace(/.$/,"")+(parseInt(r.substr(-1))+1).toString():r).replace(/}\s*}/,"}\n}");for(let e in p)i=i.replace(RegExp(r`\/\*STATIC#${e}\*\/`,"g"),p[e].strim());for(let e in o)i=i.replace(RegExp(r`\/\*COMMENT#${e}\*\/`,"g"),"/*"+o[e]+"*/");if(e)return i.strim();{if(document.querySelectorAll(`[data-hash="${t(i)}"]`).length)break;let e=document.createElement("style");e.innerHTML="\n"+i.trimStart().trimEnd()+"\n",e.dataset.hash=t(i),e.dataset.source=c[a],(document.head||document.body).appendChild(e)}}String.prototype.strim=void 0}function a(e,a){try{const s=e=>{for(let t of e)r.readFile(t,"utf8",(e,s)=>{if(e)throw`FS_ReadError: Input file '${t}' not found.`;let n=a;const c=n.includes("/")&&n.replace(/\/[^\/]+$/,"");c&&r.mkdir(c,{recursive:!0},e=>{if(e)throw`FS_MkDirError: Could not create directory '${c}'.`});const i=t.replace(/.+\/([^\/]+)$/,"$1");n||(n=l?t.replace(/\/[^\/]+$/,"/"):t.replace(/\.\w+$/,".css")),n.endsWith("/")?n+=i:l?n+="/"+i:n.match(/\.\w+$/)||(n+=".css"),n=n.replace(/\.\w+$/,".css"),r.writeFile(n,parseNovaSheets(s),e=>{if(e)throw`FS_WriteError: Output file '${n}' is invalid.`;console.log(`<NovaSheets> Wrote file '${t}' to '${n}'`)})})},l=t.hasMagic(e);l?t(e,{},(e,r)=>{if(e)throw e;s(r)}):s([e])}catch{}}try{module.exports.parse=parseNovaSheets,module.exports.compile=a;const r=e=>process.argv[e+1]||"";let t=e=>r(1).startsWith("-")&&r(1).includes(e);if(!r(1)||t("-h"))console.log('<NovaSheets> Command-line arguments:\n\n    novasheets [{-c, --compile}] <input> [<output>]\tCompile a NovaSheets file from an exact or globbed input.\n    novasheets {-p, --parse} "<input>"\t\t\tParse raw NovaSheets input from the command line.\n    novasheets {-h, --help}\t\t\t\tDisplay this help message.\n    novasheets {-v, --version}\t\t\t\tDisplay the current version of NovaSheets. ');else if(t("-v"))console.log("<NovaSheets> Current version: "+e);else if(t("-p"))console.log(parseNovaSheets(r(2)));else if(r(1)){let e=t("-c"),s=r(e?2:1),l=r(e?3:2);a(s,l)}}catch{try{document.addEventListener("DOMContentLoaded",parseNovaSheets()),a=void 0}catch(e){console.err(e)}}
